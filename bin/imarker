#!/usr/bin/env python3.6
# -*- mode: python; coding: utf-8 -*-

import logging

from http.server import HTTPServer
from optparse import OptionParser

from image_marker.server import LandingPage


try:
    parser = OptionParser()
    parser.add_option(
        '-p', '--port',
        dest='port',
        default=8080,
        help='''The port operated by HTTP server.
            Defaults to 8080.''',
    )

    options, args = parser.parse_args()
    logging.basicConfig(level=logging.INFO)
    server = HTTPServer(('', int(options.port)), LandingPage)
    server.serve_forever()
except KeyboardInterrupt:
    server.socket.close()
